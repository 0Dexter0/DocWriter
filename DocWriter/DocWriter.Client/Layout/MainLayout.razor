@using DocWriter.Shared
@inherits LayoutComponentBase

<MudThemeProvider IsDarkMode="true" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <div style="visibility: @_visibility">
        <MudAppBar Elevation="1">
            <MudText Typo="Typo.h5" Class="ml-3">DocWriter</MudText>
            <MudSpacer/>
            <MudIconButton Icon="@Icons.Material.Filled.MoreVert" Color="Color.Inherit" Edge="Edge.End"/>
        </MudAppBar>
    </div>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code
{
    private string _visibility = "visible";

    [Inject]
    private IEditorFullScreenModeValueHolder EditorFullScreenModeValueHolder { get; init; }

    protected override void OnInitialized()
    {
        EditorFullScreenModeValueHolder.IsFullScreenChanged += (sender, b) =>
        {
            _visibility = b ? "hidden" : "visible";
            StateHasChanged();
        };
    }
}

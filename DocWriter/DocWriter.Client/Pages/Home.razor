@page "/"

<MudGrid Style="height: 100%;">
    <div style="visibility: @_visibility">
        <MudItem>
            <MudDrawer @bind-Open="@_isDrawerOpen" Anchor="Anchor.Left" Width="300px" Variant="DrawerVariant.Mini" ClipMode="DrawerClipMode.Always">
                <MudDrawerHeader>
                    <MudIconButton @onclick="ToggleDrawer" Icon="@(_isDrawerOpen ? Icons.Material.Filled.ArrowLeft : Icons.Material.Filled.ArrowRight)" Style="margin-left: -20px;"/>
                </MudDrawerHeader>
                @if (_isDrawerOpen)
                {
                    <MudDrawerContainer Class="mud-height-full">
                        <MudPaper Width="300px" Height="100%" Elevation="0">
                            <MudStack AlignItems="AlignItems.Start">
                                <MudTextField T="string" Label="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" TextChanged="OnTextChanged" Immediate="true" Clearable="true"/>
                                <MudTreeView Items="@_treeItemData" @ref="_treeView" FilterFunc="MatchesName">
                                    <ItemTemplate>
                                        <MudTreeViewItem @bind-Expanded="@context.Expanded" Items="@context.Children" Value="@context.Value"
                                                         Icon="@context.Icon" Text="@context.Text" Visible="@context.Visible"/>
                                    </ItemTemplate>
                                </MudTreeView>
                            </MudStack>
                        </MudPaper>
                    </MudDrawerContainer>
                }
            </MudDrawer>
        </MudItem>
    </div>
    <MudItem>
        <div class="ma-5">
            <MarkdownEditor
                Value="@_markdownValue" ValueChanged="@OnMarkdownValueChangedAsync"
                ValueHTMLChanged="@OnMarkdownValueHTMLChanged"
                ImageUploadEndpoint="@(NavigationManager.BaseUri + "api/images")"
                UploadImage="true"
                MaxHeight="calc(0.6 * 100vh)">
            </MarkdownEditor>
        </div>
    </MudItem>
</MudGrid>